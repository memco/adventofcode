from dataclasses import dataclass

@dataclass
class Point:
    x: int = 0
    y: int = 0
    aim: int = 0

    def move_x(self, x_mod):
        new_x = self.x+x_mod
        new_y = self.y + x_mod * self.aim
        new_pos = Point(x=new_x, y=new_y, aim=self.aim)
        return new_pos

    def move_y(self, y_mod):
        aim = y_mod
        return Point(x=self.x, y=self.y, aim=self.aim+aim)

    def move(self, x=0, y=0):
        return Point(x=self.x+x, y=self.y+y)

    @property
    def area(self):
        return self.x * self.y

test_1_input = [
    "forward 5",
    "down 5",
    "forward 8",
    "up 3",
    "down 8",
    "forward 2",
]

day_2_input = [
    "forward 3",
    "down 7",
    "forward 8",
    "down 9",
    "forward 3",
    "down 5",
    "down 9",
    "down 6",
    "forward 1",
    "forward 8",
    "forward 9",
    "forward 3",
    "down 7",
    "down 8",
    "up 3",
    "down 5",
    "down 8",
    "down 9",
    "forward 5",
    "forward 6",
    "down 2",
    "forward 1",
    "forward 3",
    "down 9",
    "up 6",
    "up 2",
    "down 7",
    "down 9",
    "forward 2",
    "down 9",
    "up 3",
    "forward 5",
    "up 9",
    "up 9",
    "forward 4",
    "down 6",
    "up 7",
    "up 8",
    "up 6",
    "up 2",
    "down 7",
    "forward 9",
    "down 4",
    "forward 2",
    "forward 1",
    "up 7",
    "down 2",
    "down 8",
    "down 8",
    "down 2",
    "down 7",
    "down 3",
    "up 4",
    "down 7",
    "down 1",
    "down 7",
    "down 7",
    "forward 8",
    "forward 1",
    "forward 5",
    "forward 1",
    "forward 9",
    "forward 3",
    "forward 5",
    "down 3",
    "forward 9",
    "down 4",
    "down 2",
    "forward 5",
    "down 4",
    "down 4",
    "down 4",
    "down 9",
    "down 6",
    "down 5",
    "forward 2",
    "down 2",
    "down 8",
    "down 8",
    "down 7",
    "down 2",
    "down 8",
    "down 6",
    "down 4",
    "down 7",
    "up 8",
    "up 7",
    "up 6",
    "down 4",
    "down 2",
    "up 4",
    "up 8",
    "up 4",
    "down 4",
    "down 3",
    "forward 7",
    "forward 8",
    "up 1",
    "up 1",
    "up 7",
    "forward 2",
    "down 2",
    "forward 7",
    "forward 7",
    "forward 7",
    "down 2",
    "down 2",
    "forward 5",
    "down 3",
    "forward 3",
    "down 6",
    "down 9",
    "down 4",
    "down 1",
    "forward 2",
    "forward 2",
    "down 8",
    "down 9",
    "up 3",
    "forward 8",
    "down 7",
    "forward 6",
    "forward 6",
    "down 9",
    "up 2",
    "up 9",
    "down 2",
    "down 8",
    "up 2",
    "forward 6",
    "down 5",
    "up 9",
    "forward 6",
    "down 3",
    "down 9",
    "forward 8",
    "forward 8",
    "forward 1",
    "forward 6",
    "down 7",
    "forward 3",
    "forward 5",
    "forward 6",
    "down 1",
    "down 1",
    "forward 3",
    "forward 8",
    "forward 8",
    "up 5",
    "down 6",
    "up 5",
    "down 1",
    "up 3",
    "down 6",
    "forward 1",
    "up 3",
    "up 4",
    "down 8",
    "down 2",
    "up 2",
    "forward 1",
    "forward 2",
    "forward 6",
    "up 2",
    "down 3",
    "up 5",
    "down 5",
    "down 7",
    "up 6",
    "up 6",
    "down 8",
    "forward 7",
    "forward 2",
    "forward 3",
    "up 5",
    "down 5",
    "down 6",
    "down 4",
    "forward 8",
    "up 1",
    "forward 5",
    "up 1",
    "forward 4",
    "forward 3",
    "forward 4",
    "down 2",
    "up 5",
    "up 4",
    "down 5",
    "forward 1",
    "forward 8",
    "down 7",
    "down 1",
    "down 7",
    "forward 6",
    "down 4",
    "down 6",
    "forward 6",
    "down 8",
    "forward 7",
    "down 4",
    "down 8",
    "up 7",
    "down 6",
    "down 2",
    "up 8",
    "down 7",
    "down 8",
    "down 6",
    "down 3",
    "up 1",
    "down 7",
    "forward 1",
    "down 3",
    "down 5",
    "down 9",
    "down 3",
    "forward 1",
    "forward 4",
    "forward 2",
    "down 8",
    "forward 7",
    "down 3",
    "down 7",
    "forward 7",
    "down 4",
    "down 5",
    "down 1",
    "forward 2",
    "down 7",
    "forward 3",
    "forward 4",
    "down 8",
    "up 6",
    "down 4",
    "up 5",
    "forward 5",
    "forward 7",
    "up 8",
    "forward 6",
    "up 3",
    "forward 9",
    "up 9",
    "down 1",
    "down 2",
    "forward 6",
    "down 5",
    "forward 6",
    "down 7",
    "forward 9",
    "down 2",
    "up 5",
    "down 2",
    "forward 3",
    "up 7",
    "forward 3",
    "down 4",
    "forward 7",
    "forward 8",
    "down 5",
    "up 7",
    "up 8",
    "forward 7",
    "down 4",
    "forward 9",
    "forward 6",
    "down 2",
    "forward 3",
    "up 8",
    "up 4",
    "forward 2",
    "forward 4",
    "forward 1",
    "down 6",
    "forward 1",
    "down 9",
    "forward 2",
    "up 5",
    "down 2",
    "down 5",
    "down 5",
    "down 2",
    "down 9",
    "down 4",
    "forward 5",
    "down 5",
    "up 1",
    "forward 4",
    "down 6",
    "down 5",
    "up 8",
    "up 4",
    "down 8",
    "forward 4",
    "down 8",
    "forward 4",
    "down 2",
    "down 8",
    "forward 3",
    "forward 7",
    "down 1",
    "forward 3",
    "forward 7",
    "forward 1",
    "down 4",
    "forward 2",
    "down 3",
    "down 4",
    "forward 1",
    "up 6",
    "forward 8",
    "down 5",
    "up 6",
    "up 3",
    "forward 7",
    "down 3",
    "forward 4",
    "forward 9",
    "forward 2",
    "up 2",
    "up 7",
    "forward 1",
    "up 8",
    "down 6",
    "up 5",
    "down 3",
    "up 7",
    "down 4",
    "up 7",
    "down 8",
    "down 7",
    "forward 5",
    "up 7",
    "down 1",
    "up 9",
    "down 2",
    "down 8",
    "down 5",
    "forward 4",
    "down 3",
    "up 4",
    "down 2",
    "forward 6",
    "down 2",
    "forward 9",
    "up 9",
    "up 8",
    "forward 3",
    "forward 7",
    "forward 7",
    "up 4",
    "up 3",
    "up 4",
    "forward 1",
    "down 2",
    "up 6",
    "down 2",
    "down 4",
    "up 3",
    "down 8",
    "down 9",
    "down 4",
    "forward 6",
    "down 5",
    "down 5",
    "forward 7",
    "down 2",
    "forward 8",
    "up 2",
    "up 7",
    "down 5",
    "down 7",
    "up 9",
    "up 4",
    "up 5",
    "down 4",
    "down 8",
    "down 9",
    "down 7",
    "down 1",
    "down 1",
    "up 7",
    "up 8",
    "down 5",
    "forward 2",
    "up 3",
    "down 2",
    "down 9",
    "down 4",
    "forward 1",
    "forward 1",
    "up 4",
    "down 9",
    "up 7",
    "forward 7",
    "up 8",
    "up 4",
    "down 2",
    "down 1",
    "forward 2",
    "up 4",
    "down 3",
    "up 7",
    "down 7",
    "down 6",
    "down 4",
    "up 3",
    "down 7",
    "forward 5",
    "down 6",
    "down 9",
    "down 3",
    "forward 1",
    "down 6",
    "forward 3",
    "down 5",
    "up 1",
    "forward 5",
    "forward 4",
    "forward 8",
    "forward 1",
    "up 4",
    "down 2",
    "down 7",
    "down 9",
    "up 4",
    "up 6",
    "forward 8",
    "up 4",
    "down 8",
    "forward 7",
    "forward 1",
    "down 7",
    "forward 9",
    "forward 1",
    "forward 7",
    "forward 9",
    "down 3",
    "forward 4",
    "down 3",
    "down 3",
    "down 3",
    "down 1",
    "down 5",
    "forward 1",
    "forward 7",
    "up 5",
    "forward 5",
    "forward 4",
    "forward 7",
    "down 7",
    "up 5",
    "forward 1",
    "forward 8",
    "down 3",
    "up 6",
    "down 7",
    "forward 6",
    "down 8",
    "forward 6",
    "up 4",
    "down 9",
    "up 1",
    "forward 4",
    "forward 8",
    "down 5",
    "forward 7",
    "up 9",
    "forward 2",
    "up 2",
    "forward 7",
    "down 3",
    "forward 2",
    "down 7",
    "down 1",
    "forward 9",
    "forward 3",
    "up 5",
    "forward 7",
    "up 4",
    "forward 2",
    "down 3",
    "down 2",
    "down 8",
    "forward 7",
    "down 8",
    "down 3",
    "forward 9",
    "forward 9",
    "forward 5",
    "up 8",
    "forward 9",
    "up 2",
    "forward 2",
    "up 4",
    "forward 2",
    "forward 1",
    "forward 7",
    "forward 6",
    "down 5",
    "forward 5",
    "forward 1",
    "forward 7",
    "forward 4",
    "down 5",
    "down 9",
    "down 8",
    "forward 5",
    "up 5",
    "up 1",
    "down 8",
    "down 9",
    "forward 1",
    "down 5",
    "forward 6",
    "down 1",
    "down 7",
    "down 7",
    "down 4",
    "forward 3",
    "down 5",
    "down 8",
    "forward 2",
    "down 4",
    "forward 3",
    "down 1",
    "up 5",
    "down 8",
    "forward 9",
    "up 6",
    "up 4",
    "down 6",
    "down 9",
    "forward 2",
    "forward 5",
    "down 3",
    "forward 2",
    "down 5",
    "forward 1",
    "forward 4",
    "down 6",
    "down 4",
    "up 2",
    "down 9",
    "forward 2",
    "up 8",
    "down 4",
    "forward 7",
    "down 5",
    "forward 8",
    "down 1",
    "forward 5",
    "down 7",
    "up 5",
    "down 7",
    "down 4",
    "forward 3",
    "down 1",
    "forward 7",
    "forward 9",
    "up 9",
    "forward 5",
    "forward 8",
    "up 8",
    "forward 6",
    "down 5",
    "down 8",
    "forward 9",
    "forward 3",
    "down 3",
    "forward 9",
    "forward 7",
    "forward 6",
    "forward 1",
    "up 2",
    "forward 8",
    "down 9",
    "down 5",
    "down 5",
    "down 4",
    "forward 7",
    "down 8",
    "down 7",
    "forward 8",
    "forward 2",
    "down 5",
    "forward 2",
    "forward 3",
    "down 6",
    "down 8",
    "up 8",
    "forward 7",
    "down 7",
    "up 7",
    "forward 5",
    "up 6",
    "forward 7",
    "up 6",
    "forward 8",
    "forward 5",
    "up 6",
    "forward 1",
    "down 5",
    "forward 1",
    "up 5",
    "down 1",
    "forward 6",
    "forward 3",
    "up 2",
    "forward 9",
    "forward 8",
    "down 9",
    "forward 7",
    "forward 7",
    "forward 8",
    "up 9",
    "down 8",
    "up 1",
    "down 4",
    "forward 2",
    "forward 7",
    "down 1",
    "up 7",
    "down 5",
    "forward 2",
    "down 4",
    "down 8",
    "forward 6",
    "down 3",
    "forward 8",
    "up 6",
    "forward 5",
    "forward 7",
    "down 5",
    "down 1",
    "down 7",
    "down 7",
    "up 8",
    "down 5",
    "forward 4",
    "down 5",
    "down 7",
    "down 2",
    "up 8",
    "forward 6",
    "up 1",
    "down 3",
    "forward 9",
    "up 1",
    "down 7",
    "forward 2",
    "down 6",
    "forward 6",
    "up 3",
    "up 9",
    "up 2",
    "forward 4",
    "forward 4",
    "down 4",
    "down 4",
    "down 2",
    "down 5",
    "forward 7",
    "forward 6",
    "forward 9",
    "down 9",
    "forward 6",
    "up 1",
    "down 2",
    "down 4",
    "down 7",
    "down 5",
    "down 4",
    "up 2",
    "up 8",
    "down 6",
    "forward 2",
    "up 7",
    "down 2",
    "up 5",
    "down 8",
    "forward 3",
    "up 2",
    "forward 3",
    "forward 5",
    "forward 9",
    "forward 2",
    "forward 8",
    "forward 1",
    "down 5",
    "up 6",
    "forward 9",
    "forward 4",
    "up 8",
    "down 8",
    "up 2",
    "down 9",
    "down 3",
    "down 5",
    "up 4",
    "forward 2",
    "down 5",
    "forward 6",
    "down 6",
    "forward 2",
    "forward 7",
    "forward 6",
    "forward 1",
    "down 7",
    "forward 8",
    "up 2",
    "forward 5",
    "forward 5",
    "up 3",
    "forward 2",
    "forward 3",
    "forward 8",
    "forward 4",
    "down 1",
    "down 9",
    "up 5",
    "down 5",
    "forward 1",
    "down 8",
    "up 3",
    "down 9",
    "forward 5",
    "forward 2",
    "forward 2",
    "up 1",
    "forward 1",
    "down 5",
    "forward 4",
    "up 4",
    "up 3",
    "up 3",
    "down 4",
    "down 5",
    "down 1",
    "forward 8",
    "down 4",
    "up 7",
    "down 6",
    "forward 5",
    "forward 4",
    "forward 8",
    "forward 8",
    "up 3",
    "forward 7",
    "down 4",
    "forward 8",
    "forward 4",
    "forward 6",
    "down 8",
    "down 6",
    "down 1",
    "forward 4",
    "down 8",
    "down 6",
    "forward 2",
    "down 8",
    "up 7",
    "down 2",
    "forward 5",
    "down 4",
    "down 7",
    "down 8",
    "forward 5",
    "down 4",
    "down 2",
    "down 7",
    "down 4",
    "forward 7",
    "forward 3",
    "up 4",
    "down 7",
    "down 9",
    "up 4",
    "up 5",
    "down 7",
    "up 5",
    "down 3",
    "down 5",
    "forward 8",
    "up 1",
    "up 9",
    "forward 9",
    "forward 7",
    "down 2",
    "up 1",
    "up 7",
    "down 3",
    "forward 3",
    "up 6",
    "forward 1",
    "forward 2",
    "down 4",
    "down 3",
    "forward 4",
    "forward 7",
    "forward 9",
    "down 8",
    "down 6",
    "forward 1",
    "forward 3",
    "forward 2",
    "up 3",
    "down 6",
    "down 7",
    "up 8",
    "down 5",
    "up 6",
    "down 8",
    "forward 4",
    "up 3",
    "forward 3",
    "forward 4",
    "down 5",
    "up 5",
    "down 4",
    "down 5",
    "down 5",
    "forward 3",
    "up 9",
    "down 8",
    "down 2",
    "down 7",
    "down 4",
    "down 3",
    "up 2",
    "forward 6",
    "down 4",
    "down 1",
    "down 4",
    "forward 1",
    "forward 8",
    "down 3",
    "down 7",
    "down 3",
    "forward 1",
    "down 9",
    "down 7",
    "down 3",
    "down 3",
    "down 6",
    "down 8",
    "down 2",
    "down 5",
    "up 1",
    "up 7",
    "forward 9",
    "forward 6",
    "forward 7",
    "forward 8",
    "up 7",
    "down 9",
    "down 4",
    "down 7",
    "forward 2",
    "forward 4",
    "forward 1",
    "forward 4",
    "forward 3",
    "forward 8",
    "down 5",
    "forward 8",
    "up 4",
    "up 9",
    "forward 3",
    "down 7",
    "forward 9",
    "down 2",
    "forward 5",
    "up 7",
    "down 4",
    "down 3",
    "down 5",
    "down 4",
    "forward 9",
    "forward 5",
    "forward 6",
    "forward 6",
    "down 2",
    "down 7",
    "forward 4",
    "up 5",
    "down 8",
    "down 9",
    "forward 5",
    "down 8",
    "forward 9",
    "up 6",
    "forward 8",
    "forward 7",
    "up 7",
    "down 9",
    "forward 5",
    "down 9",
    "forward 7",
    "down 5",
    "down 7",
    "forward 9",
    "forward 4",
    "up 1",
    "up 9",
    "forward 7",
    "up 5",
    "up 2",
    "down 6",
    "forward 7",
    "down 2",
    "forward 6",
    "forward 7",
    "down 4",
    "up 3",
    "up 9",
    "forward 4",
    "forward 6",
    "forward 3",
    "up 6",
    "down 5",
    "up 2",
    "forward 3",
    "down 5",
    "forward 1",
    "up 7",
    "down 8",
    "up 4",
    "forward 9",
    "forward 6",
    "down 7",
    "forward 4",
    "down 9",
    "down 8",
    "down 7",
    "forward 7",
    "down 5",
    "forward 3",
    "up 5",
    "forward 9",
    "forward 7",
    "forward 3",
    "down 5",
    "forward 8",
    "down 3",
    "forward 1",
    "down 3",
    "down 3",
    "forward 2",
    "down 4",
    "forward 7",
    "up 1",
    "down 6",
    "up 3",
    "forward 8",
    "down 6",
    "forward 6",
    "down 5",
    "down 4",
    "forward 3",
    "up 1",
    "forward 5",
    "forward 5",
    "forward 2",
    "up 9",
    "forward 3",
    "down 5",
    "up 3",
    "up 4",
    "down 7",
    "down 4",
    "up 3",
    "up 3",
    "forward 2",
    "up 2",
    "forward 8",
    "down 9",
    "down 1",
    "up 8",
    "down 2",
    "up 4",
    "forward 9",
    "up 1",
    "down 8",
    "forward 3",
    "up 9",
    "down 7",
    "down 5",
    "down 9",
    "down 1",
    "down 2",
    "down 9",
    "down 4",
    "down 8",
    "down 8",
    "down 9",
    "down 2",
    "down 6",
    "down 9",
    "forward 8",
]

def parse_input(inputs):
    for i in inputs:
        yield i.split(' ')


def parse_move(move):
    val = int(move[1])
    if move[0] in ['down', 'forward']:
        return val
    return -val

def process_moves(move_inputs):
    depth_changes = [c for c in parse_input(move_inputs) if c[0] in ['up', 'down']]
    horizontal_changes = [c for c in parse_input(move_inputs) if c[0] in ['forward']]
    new_depth = sum(parse_move(move) for move in depth_changes)    
    new_horizontal = sum(parse_move(move) for move in horizontal_changes)
    return Point(x=new_horizontal, y=new_depth)


def aim_and_move(move_inputs):
    all_inputs = parse_input(move_inputs)
    pos = Point()
    for move in all_inputs:
        depth_change = move[0] in ['up', 'down']
        pos_change = parse_move(move)
        change_action = pos.move_y if depth_change else pos.move_x
        new_pos = change_action(pos_change)
        pos = new_pos
    return pos



if __name__ == "__main__":
    # pos = process_moves(day_2_input)
    # print(pos.area)

    pos = aim_and_move(day_2_input)
    print(pos.area)